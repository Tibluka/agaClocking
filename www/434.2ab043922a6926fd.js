"use strict";(self.webpackChunkagaclocking=self.webpackChunkagaclocking||[]).push([[434],{1434:(O,d,r)=>{r.r(d),r.d(d,{HomeModule:()=>Y});var c=r(9808),s=r(2382),m=r(5439),v=r(5861),t=r(1223),p=r(4073),u=r(4832);function _(n,o){if(1&n&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function S(n,o){if(1&n&&(t.TgZ(0,"option",14),t._uU(1),t.qZA()),2&n){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const g=function(){return{standalone:!0}};let T=(()=>{class n{constructor(e,i){this.activeModal=e,this.shiftsService=i,this.hour=0,this.minute=0,this.today=new Date,this.shiftForm=new s.cw({endShift:new s.NI(null),shiftId:new s.NI("")})}get shiftDate(){return this.shiftsService.date}get hours(){let e=new Array(24);for(let i=0;i<e.length;i++)e[i]=i;return e}get minutes(){let e=new Array(60);for(let i=0;i<e.length;i++)e[i]=i;return e}ngOnInit(){}cancel(){this.activeModal.close()}updateShift(){var e=this;return(0,v.Z)(function*(){e.shiftForm.valid&&(yield e.shiftsService.terminateShift(e.shiftForm.value),e.activeModal.close())})()}changeHour(){this.shiftForm.get("endShift").setValue(m().set("hours",Number(this.hour)).format("YYYY-MM-DDTHH:mm:ss"))}changeMinute(){this.shiftForm.get("endShift").setValue(m().set("minutes",Number(this.minute)).format("YYYY-MM-DDTHH:mm:ss"))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p.Kz),t.Y36(u.U))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-update-shift"]],decls:23,vars:13,consts:[[1,"modal-header","d-flex","justify-content-between"],[1,"d-block"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"d-flex","align-items-center","mt-5"],[1,"text-nowrap","me-2"],[1,"w-100","me-2"],[1,"form-group"],[1,"form-select",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"w-100"],[1,"d-flex","flex-column","mt-5"],["type","button",1,"secondary-btn","w-100",3,"click"],[1,"primary-btn","w-100","mt-3"],[3,"value"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0),t._uU(1," Finalizar turno "),t.TgZ(2,"span",1),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"div",2)(6,"form",3),t.NdJ("ngSubmit",function(){return i.updateShift()}),t.TgZ(7,"div",4)(8,"label",5),t._uU(9,"Registrar hor\xe1rio de t\xe9rmino"),t.qZA(),t.TgZ(10,"div",6)(11,"div",7)(12,"select",8),t.NdJ("ngModelChange",function(f){return i.hour=f})("change",function(){return i.changeHour()}),t.YNc(13,_,2,2,"option",9),t.qZA()()(),t.TgZ(14,"div",10)(15,"div",7)(16,"select",8),t.NdJ("ngModelChange",function(f){return i.minute=f})("change",function(){return i.changeMinute()}),t.YNc(17,S,2,2,"option",9),t.qZA()()()(),t.TgZ(18,"div",11)(19,"button",12),t.NdJ("click",function(){return i.cancel()}),t._uU(20,"Cancelar"),t.qZA(),t.TgZ(21,"button",13),t._uU(22,"Finalizar"),t.qZA()()()()),2&e&&(t.xp6(3),t.Oqu(t.xi3(4,8,i.shiftDate,"dd/MM/yyyy")),t.xp6(3),t.Q6J("formGroup",i.shiftForm),t.xp6(6),t.Q6J("ngModelOptions",t.DdM(11,g))("ngModel",i.hour),t.xp6(1),t.Q6J("ngForOf",i.hours),t.xp6(3),t.Q6J("ngModelOptions",t.DdM(12,g))("ngModel",i.minute),t.xp6(1),t.Q6J("ngForOf",i.minutes))},directives:[s._Y,s.JL,s.sg,s.EJ,s.JJ,s.On,c.sg,s.YN,s.Kr],pipes:[c.uU],styles:[""]}),n})();var Z=r(1346);function C(n,o){1&n&&t._UZ(0,"img",6)}function M(n,o){1&n&&t._UZ(0,"img",7)}function y(n,o){1&n&&(t.TgZ(0,"span"),t._uU(1,"\xe0s"),t.qZA())}let x=(()=>{class n{constructor(){this.shift=new Z.e1}ngOnInit(){}calculateDifference(e){let i=new Date(e.startShift),a=new Date(e.endShift);if(e.finished){var f=a.getTime()-i.getTime();return`${Math.floor(f%864e5/36e5)}:${Math.round(f%864e5%36e5/6e4)}hr`}return"Aberto"}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-shift-item"]],inputs:{shift:"shift"},decls:14,vars:13,consts:[[1,"shift"],[1,"d-flex","align-items-center"],["src","../../../assets/icons/shift-finished-icon.svg","alt","",4,"ngIf"],["src","../../../assets/icons/shift-initiated-icon.svg","alt","",4,"ngIf"],[1,"d-block","ms-2"],[4,"ngIf"],["src","../../../assets/icons/shift-finished-icon.svg","alt",""],["src","../../../assets/icons/shift-initiated-icon.svg","alt",""]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,C,1,0,"img",2),t.YNc(3,M,1,0,"img",3),t.TgZ(4,"span",4),t._uU(5),t.qZA()(),t.TgZ(6,"span"),t._uU(7),t.ALo(8,"date"),t.YNc(9,y,2,0,"span",5),t._uU(10),t.ALo(11,"date"),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA()()),2&e&&(t.xp6(2),t.Q6J("ngIf",i.shift.finished),t.xp6(1),t.Q6J("ngIf",!i.shift.finished),t.xp6(2),t.Oqu(i.shift.project),t.xp6(2),t.hij("",t.xi3(8,7,i.shift.startShift,"HH:mm")," "),t.xp6(2),t.Q6J("ngIf",i.shift.finished),t.xp6(1),t.hij(" ",t.xi3(11,10,i.shift.endShift,"HH:mm"),""),t.xp6(3),t.Oqu(i.calculateDifference(i.shift)))},directives:[c.O5],pipes:[c.uU],styles:[".shift[_ngcontent-%COMP%]{height:64px;padding:20px 28px;border-top:1px solid var(--borders);border-bottom:1px solid var(--borders);width:100%;display:flex;justify-content:space-between;align-items:center}"]}),n})();function U(n,o){1&n&&(t.TgZ(0,"div"),t._uU(1,"Hoje"),t.qZA())}function D(n,o){if(1&n){const e=t.EpF();t.TgZ(0,"div",10),t.NdJ("click",function(){const f=t.CHM(e).$implicit;return t.oxw(2).terminateShift(f)}),t._UZ(1,"app-shift-item",11),t.qZA()}if(2&n){const e=o.$implicit;t.xp6(1),t.Q6J("shift",e)}}function I(n,o){if(1&n&&(t.TgZ(0,"div",8),t.YNc(1,D,2,1,"div",9),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.shifts)}}function H(n,o){1&n&&(t.TgZ(0,"div",12),t._UZ(1,"img",13),t.TgZ(2,"div",14),t._uU(3,"Nenhum ponto registrado"),t.qZA()())}let w=(()=>{class n{constructor(e,i){this.shiftsService=e,this.ngbModal=i,this.today=new Date,this.shiftsService.listShifts()}get shifts(){return this.shiftsService.shifts}get shiftDate(){return this.shiftsService.date}ngOnInit(){}calculateDifference(e){let i=new Date(e.startShift),a=new Date(e.endShift);if(e.finished){var f=a.getTime()-i.getTime();return`${Math.floor(f%864e5/36e5)}:${Math.round(f%864e5%36e5/6e4)}hr`}return"Aberto"}isToday(){let e=new Date(this.today).setHours(0),i=new Date(this.shiftDate).setHours(0);return new Date(e).getDate()===new Date(i).getDate()}previousShiftDate(){this.shiftsService.previousShiftDate()}nextShiftDate(){this.shiftsService.nextShiftDate()}terminateShift(e){const i=this.ngbModal.open(T,{size:"md",centered:!0});i.componentInstance.shiftForm=new s.cw({endShift:new s.NI(m(this.shiftDate).format("YYYY-MM-DDTHH:mm:ss")),shiftId:new s.NI(e._id.$oid)}),i.componentInstance.hour=this.today.getHours(),i.componentInstance.minute=this.today.getMinutes()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.U),t.Y36(p.FF))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:13,vars:7,consts:[[2,"height","102px"],[1,"date-time","d-flex","align-items-center","justify-content-between"],["src","../../../assets/icons/left-arrow-icon.svg","alt","",3,"click"],[1,"d-flex","flex-column","align-items-center"],[4,"ngIf"],["src","../../../assets/icons/right-arrow-icon.svg","alt","",3,"click"],["class","body",4,"ngIf","ngIfElse"],["noShifts",""],[1,"body"],["class","shifts",3,"click",4,"ngFor","ngForOf"],[1,"shifts",3,"click"],[3,"shift"],[1,"no-shifts","d-flex","flex-column","justify-content-center","align-items-center"],["src","../../../assets/icons/alert-icon.svg","alt",""],[1,"text-center"]],template:function(e,i){if(1&e&&(t.TgZ(0,"main"),t._UZ(1,"div",0),t.TgZ(2,"div",1)(3,"img",2),t.NdJ("click",function(){return i.previousShiftDate()}),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,U,2,0,"div",4),t.TgZ(6,"div"),t._uU(7),t.ALo(8,"date"),t.qZA()(),t.TgZ(9,"img",5),t.NdJ("click",function(){return i.nextShiftDate()}),t.qZA()(),t.YNc(10,I,2,1,"div",6),t.YNc(11,H,4,0,"ng-template",null,7,t.W1O),t.qZA()),2&e){const a=t.MAs(12);t.xp6(5),t.Q6J("ngIf",i.isToday()),t.xp6(2),t.Oqu(t.xi3(8,4,i.shiftDate,"dd/MM/yyyy")),t.xp6(3),t.Q6J("ngIf",i.shifts.length>0)("ngIfElse",a)}},directives:[c.O5,c.sg,x],pipes:[c.uU],styles:["main[_ngcontent-%COMP%]{padding:28px 0;position:relative;height:100vh}.date-time[_ngcontent-%COMP%]{padding:0 38px}.no-shifts[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.body[_ngcontent-%COMP%]{margin-top:40px}"]}),n})();var A=r(9560);let J=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez]]}),n})(),Y=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[c.ez,J,A.Bz.forChild([{path:"",component:w}])]]}),n})()}}]);