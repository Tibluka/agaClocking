"use strict";(self.webpackChunkagaclocking=self.webpackChunkagaclocking||[]).push([[321],{9321:(j,a,o)=>{o.r(a),o.d(a,{GraphicsModule:()=>M});var h=o(9808),t=o(1223),u=o(9376),p=o(4832),g=o(3071),i=o(2382);function l(n,r){if(1&n&&(t.TgZ(0,"option",10),t._uU(1),t.qZA()),2&n){const e=r.$implicit;t.Q6J("value",e._id.$oid),t.xp6(1),t.Oqu(e.name)}}const m=function(n){return{height:n}};function d(n,r){if(1&n&&(t.TgZ(0,"div",11)(1,"span",12),t._uU(2),t.qZA(),t.TgZ(3,"span",13),t._uU(4),t.qZA()()),2&n){const e=r.$implicit,s=t.oxw();t.Q6J("ngStyle",t.VKq(3,m,s.getPercentage(e.totalInMinutes)+"%")),t.xp6(2),t.Oqu(s.getTotalInHours(e.totalInMinutes)),t.xp6(2),t.Oqu(e.project)}}let v=(()=>{class n{constructor(e,s,c){this.graphicsService=e,this.shiftsService=s,this.userService=c,this.selectedUser="",this.userService.listUsers(),this.graphicsService.setChartByMonth(this.shiftMonth.getFullYear(),this.shiftMonth.getMonth()+1),this.graphicsService.listUsers(this.shiftsService.date)}get user(){return this.userService.user}get users(){return this.userService.userList}get shiftMonth(){return this.shiftsService.month}get totalHoursByMonth(){return this.graphicsService.totalHoursByMonth}get hoursByProject(){return this.graphicsService.hoursByProject}get highestAmountHourProject(){const s=Math.max(...this.graphicsService.hoursByProject.map(c=>c.totalInMinutes));return s===-1/0?0:this.graphicsService.toHoursAndMinutes(s).hours+10}ngOnInit(){}getPercentage(e){return this.graphicsService.toHoursAndMinutes(e).hours/this.highestAmountHourProject*100}getTotalInHours(e){const s=this.graphicsService.toHoursAndMinutes(e).minutes<10?"0":"";return`${this.graphicsService.toHoursAndMinutes(e).hours}:${s}${this.graphicsService.toHoursAndMinutes(e).minutes}h`}changeUser(e){this.graphicsService.setChartByMonth(this.shiftMonth.getFullYear(),this.shiftMonth.getMonth()+1,e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(u.a),t.Y36(p.U),t.Y36(g.K))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-graphics"]],decls:17,vars:5,consts:[[2,"height","90px"],[1,"p-2"],[1,"form-group"],["for","user"],["name","user",1,"form-select",3,"ngModel","change","ngModelChange"],["value",""],[3,"value",4,"ngFor","ngForOf"],[1,"projects","d-flex","mt-4"],[1,"d-flex","justify-content-between","flex-column"],["class","project align-self-end position-relative",3,"ngStyle",4,"ngFor","ngForOf"],[3,"value"],[1,"project","align-self-end","position-relative",3,"ngStyle"],[1,"project-time"],[1,"project-title"]],template:function(e,s){1&e&&(t._UZ(0,"div",0),t.TgZ(1,"main",1)(2,"div",2),t._UZ(3,"label",3),t.TgZ(4,"select",4),t.NdJ("change",function(){return s.changeUser(s.selectedUser)})("ngModelChange",function(C){return s.selectedUser=C}),t.TgZ(5,"option",5),t._uU(6,"Todos os usu\xe1rios"),t.qZA(),t.YNc(7,l,2,2,"option",6),t.qZA()(),t.TgZ(8,"div",7)(9,"div",8)(10,"div"),t._uU(11),t.qZA(),t.TgZ(12,"div"),t._uU(13),t.qZA(),t.TgZ(14,"div"),t._uU(15,"0"),t.qZA()(),t.YNc(16,d,5,5,"div",9),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngModel",s.selectedUser),t.xp6(3),t.Q6J("ngForOf",s.users),t.xp6(4),t.Oqu(s.highestAmountHourProject),t.xp6(2),t.Oqu(s.highestAmountHourProject/2),t.xp6(3),t.Q6J("ngForOf",s.hoursByProject))},directives:[i.EJ,i.JJ,i.On,i.YN,i.Kr,h.sg,h.PC],styles:["main[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]{display:flex;height:300px;padding:10px}main[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .project[_ngcontent-%COMP%]{width:100%;background:var(--primary);margin:0 5px}main[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .project[_ngcontent-%COMP%]   .project-title[_ngcontent-%COMP%]{position:absolute;transform:rotate(45deg);right:0;bottom:-40px;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;width:50px}main[_ngcontent-%COMP%]   .projects[_ngcontent-%COMP%]   .project[_ngcontent-%COMP%]   .project-time[_ngcontent-%COMP%]{position:absolute;top:-20px;font-size:10px!important}"]}),n})();var f=o(981);let M=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[h.ez,i.u5,f.Bz.forChild([{path:"",component:v}])]]}),n})()}}]);