"use strict";(self.webpackChunkagaclocking=self.webpackChunkagaclocking||[]).push([[434],{7434:(L,g,l)=>{l.r(g),l.d(g,{HomeModule:()=>P});var f=l(9808),r=l(2382),h=l(5439),_=l(5861),v=l(1346),t=l(1223),d=l(4832),c=l(4073);function S(i,o){if(1&i&&(t.TgZ(0,"div",8),t._uU(1," Deseja remover o turno registrado das "),t.TgZ(2,"b"),t._uU(3),t.ALo(4,"date"),t.qZA(),t._uU(5," \xe1s "),t.TgZ(6,"b"),t._uU(7),t.ALo(8,"date"),t.qZA(),t._uU(9," no projeto "),t.TgZ(10,"b"),t._uU(11),t.qZA(),t._uU(12," ? "),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.xi3(4,3,e.shift.startShift,"HH:mm")),t.xp6(4),t.Oqu(t.xi3(8,6,e.shift.endShift,"HH:mm")),t.xp6(4),t.Oqu(e.shift.project)}}function T(i,o){if(1&i&&(t.TgZ(0,"div",8),t._uU(1," Deseja remover o turno iniciado \xe1s "),t.TgZ(2,"b"),t._uU(3),t.ALo(4,"date"),t.qZA(),t._uU(5," no projeto "),t.TgZ(6,"b"),t._uU(7),t.qZA(),t._uU(8," ? "),t.qZA()),2&i){const e=t.oxw();t.xp6(3),t.Oqu(t.xi3(4,2,e.shift.startShift,"HH:mm")),t.xp6(4),t.Oqu(e.shift.project)}}let Z=(()=>{class i{constructor(e,n){this.shiftsService=e,this.ngbActiveModal=n,this.shift=new v.e1}get shiftDate(){return this.shiftsService.date}ngOnInit(){}cancel(){this.ngbActiveModal.close()}deleteShift(){var e=this;return(0,_.Z)(function*(){yield e.shiftsService.deleteShift(e.shift),e.ngbActiveModal.close()})()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.U),t.Y36(c.Kz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-delete-shift"]],decls:14,vars:6,consts:[[1,"modal-header","d-flex","justify-content-between"],[1,"d-block"],[1,"modal-body","text-center"],["class","title",4,"ngIf","ngIfElse"],["notFinished",""],[1,"d-flex","flex-column","mt-5"],["type","button",1,"secondary-btn","w-100",3,"click"],[1,"primary-btn","w-100","mt-3",3,"click"],[1,"title"]],template:function(e,n){if(1&e&&(t.TgZ(0,"div",0),t._uU(1," Deletar registro "),t.TgZ(2,"span",1),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"div",2),t.YNc(6,S,13,9,"div",3),t.YNc(7,T,9,5,"ng-template",null,4,t.W1O),t.TgZ(9,"div",5)(10,"button",6),t.NdJ("click",function(){return n.cancel()}),t._uU(11,"Cancelar"),t.qZA(),t.TgZ(12,"button",7),t.NdJ("click",function(){return n.deleteShift()}),t._uU(13,"Cadastrar"),t.qZA()()()),2&e){const s=t.MAs(8);t.xp6(3),t.Oqu(t.xi3(4,3,n.shiftDate,"dd/MM/yyyy")),t.xp6(3),t.Q6J("ngIf",n.shift.finished)("ngIfElse",s)}},directives:[f.O5],pipes:[f.uU],styles:[""]}),i})();function M(i,o){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function C(i,o){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function y(i,o){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function U(i,o){if(1&i&&(t.TgZ(0,"option",20),t._uU(1),t.qZA()),2&i){const e=o.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}const u=function(){return{standalone:!0}};let b=(()=>{class i{constructor(e,n){this.activeModal=e,this.shiftsService=n,this.startShiftHour=0,this.startShiftMinute=0,this.endShiftHour=0,this.endShiftMinute=0,this.today=new Date,this.shiftForm=new r.cw({startShift:new r.NI(""),activity:new r.NI(""),endShift:new r.NI(""),shiftId:new r.NI(""),overnight:new r.NI(!1)})}get shiftDate(){return this.shiftsService.date}get hours(){let e=new Array(24);for(let n=0;n<e.length;n++)e[n]=n;return e}get minutes(){let e=new Array(60);for(let n=0;n<e.length;n++)e[n]=n;return e}ngOnInit(){}cancel(){this.activeModal.close()}updateShift(){var e=this;return(0,_.Z)(function*(){if(e.shiftForm.valid){if(!0===e.shiftForm.get("overnight").value){let n=h(e.shiftForm.get("endShift").value).add(1,"days").format("YYYY-MM-DDTHH:mm:ss");e.shiftForm.get("endShift").setValue(n)}yield e.shiftsService.updateShift(e.shiftForm.value),e.activeModal.close()}})()}changeHour(e){let n=0;n="endShift"===e?this.endShiftHour:this.startShiftHour;let s=h(this.shiftForm.get(e).value).set("hours",Number(n)).format("YYYY-MM-DDTHH:mm:ss");this.shiftForm.get(e).setValue(s)}changeMinute(e){let n=0;n="endShift"===e?this.endShiftMinute:this.startShiftMinute;let s=h(this.shiftForm.get(e).value).set("minutes",Number(n)).format("YYYY-MM-DDTHH:mm:ss");this.shiftForm.get(e).setValue(s)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.Kz),t.Y36(d.U))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-update-shift"]],decls:43,vars:21,consts:[[1,"modal-header","d-flex","justify-content-between"],[1,"d-block"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"d-flex","align-items-center","mt-3"],[1,"text-nowrap","me-2"],[1,"w-100","me-2"],[1,"form-group"],[1,"form-select",3,"ngModelOptions","ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[1,"w-100"],[1,"form-check","mt-3"],["formControlName","overnight","type","checkbox","id","overnight",1,"form-check-input"],["for","overnight",1,"form-check-label"],[1,"form-group","mt-3"],["for","activity"],["formControlName","activity","rows","3",1,"form-control"],[1,"d-flex","flex-column","mt-5"],["type","button",1,"secondary-btn","w-100",3,"click"],[1,"primary-btn","w-100","mt-3"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t._uU(1," Finalizar turno "),t.TgZ(2,"span",1),t._uU(3),t.ALo(4,"date"),t.qZA()(),t.TgZ(5,"div",2)(6,"form",3),t.NdJ("ngSubmit",function(){return n.updateShift()}),t.TgZ(7,"div",4)(8,"label",5),t._uU(9,"In\xedcio do turno"),t.qZA(),t.TgZ(10,"div",6)(11,"div",7)(12,"select",8),t.NdJ("ngModelChange",function(a){return n.startShiftHour=a})("change",function(){return n.changeHour("startShift")}),t.YNc(13,M,2,2,"option",9),t.qZA()()(),t.TgZ(14,"div",10)(15,"div",7)(16,"select",8),t.NdJ("ngModelChange",function(a){return n.startShiftMinute=a})("change",function(){return n.changeMinute("startShift")}),t.YNc(17,C,2,2,"option",9),t.qZA()()()(),t.TgZ(18,"div",4)(19,"label",5),t._uU(20,"Fim do turno"),t.qZA(),t.TgZ(21,"div",6)(22,"div",7)(23,"select",8),t.NdJ("ngModelChange",function(a){return n.endShiftHour=a})("change",function(){return n.changeHour("endShift")}),t.YNc(24,y,2,2,"option",9),t.qZA()()(),t.TgZ(25,"div",10)(26,"div",7)(27,"select",8),t.NdJ("ngModelChange",function(a){return n.endShiftMinute=a})("change",function(){return n.changeMinute("endShift")}),t.YNc(28,U,2,2,"option",9),t.qZA()()()(),t.TgZ(29,"div",11),t._UZ(30,"input",12),t.TgZ(31,"label",13),t._uU(32," Overnight "),t.qZA()(),t.TgZ(33,"div",10)(34,"div",14)(35,"label",15),t._uU(36,"Atividades"),t.qZA(),t._UZ(37,"textarea",16),t.qZA()(),t.TgZ(38,"div",17)(39,"button",18),t.NdJ("click",function(){return n.cancel()}),t._uU(40,"Cancelar"),t.qZA(),t.TgZ(41,"button",19),t._uU(42,"Finalizar"),t.qZA()()()()),2&e&&(t.xp6(3),t.Oqu(t.xi3(4,14,n.shiftDate,"dd/MM/yyyy")),t.xp6(3),t.Q6J("formGroup",n.shiftForm),t.xp6(6),t.Q6J("ngModelOptions",t.DdM(17,u))("ngModel",n.startShiftHour),t.xp6(1),t.Q6J("ngForOf",n.hours),t.xp6(3),t.Q6J("ngModelOptions",t.DdM(18,u))("ngModel",n.startShiftMinute),t.xp6(1),t.Q6J("ngForOf",n.minutes),t.xp6(6),t.Q6J("ngModelOptions",t.DdM(19,u))("ngModel",n.endShiftHour),t.xp6(1),t.Q6J("ngForOf",n.hours),t.xp6(3),t.Q6J("ngModelOptions",t.DdM(20,u))("ngModel",n.endShiftMinute),t.xp6(1),t.Q6J("ngForOf",n.minutes))},directives:[r._Y,r.JL,r.sg,r.EJ,r.JJ,r.On,f.sg,r.YN,r.Kr,r.Wl,r.u,r.Fj],pipes:[f.uU],styles:[""]}),i})();var O=l(4471);function x(i,o){1&i&&t._UZ(0,"img",9)}function H(i,o){1&i&&t._UZ(0,"img",10)}function w(i,o){1&i&&(t.TgZ(0,"span"),t._uU(1,"\xe0s"),t.qZA())}const A=function(i){return{"border-top":i}},D=function(i,o){return{"enable-delete":i,overnight:o}};let I=(()=>{class i{constructor(e){this.ngbModal=e,this.shift=new v.e1,this.deleteOutput=new t.vpe,this.updateOutput=new t.vpe,this.deleteState=!1}ngOnInit(){}calculateDifference(e){let n=new Date(e.startShift),s=new Date(e.endShift);if(e.finished){var a=s.getTime()-n.getTime();return`${Math.floor(a%864e5/36e5)}:${Math.round(a%864e5%36e5/6e4)}hr`}return"Aberto"}swipeRight(){this.deleteState=!0}swipeLeft(){this.deleteState=!1}deleteShift(){this.deleteOutput.emit(this.shift)}updateShift(){this.updateOutput.emit(this.shift)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(c.FF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-shift-item"]],inputs:{shift:"shift",index:"index"},outputs:{deleteOutput:"deleteOutput",updateOutput:"updateOutput"},decls:17,vars:20,consts:[[1,"shift-parent",3,"ngStyle"],[1,"shift",3,"ngClass","click","swiperight","swipeLeft"],[1,"d-flex","align-items-center"],["src","../../../assets/icons/shift-finished-icon.svg","alt","",4,"ngIf"],["src","../../../assets/icons/shift-initiated-icon.svg","alt","",4,"ngIf"],[1,"d-block","ms-2"],[4,"ngIf"],[1,"under-layer",3,"click"],["src","../../../assets/icons/trash-can-icon.svg","alt",""],["src","../../../assets/icons/shift-finished-icon.svg","alt",""],["src","../../../assets/icons/shift-initiated-icon.svg","alt",""]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1),t.NdJ("click",function(){return n.updateShift()})("swiperight",function(){return n.swipeRight()})("swipeLeft",function(){return n.swipeLeft()}),t.TgZ(2,"div",2),t.YNc(3,x,1,0,"img",3),t.YNc(4,H,1,0,"img",4),t.TgZ(5,"span",5),t._uU(6),t.qZA()(),t.TgZ(7,"span"),t._uU(8),t.ALo(9,"date"),t.YNc(10,w,2,0,"span",6),t._uU(11),t.ALo(12,"date"),t.qZA(),t.TgZ(13,"span"),t._uU(14),t.qZA()(),t.TgZ(15,"div",7),t.NdJ("click",function(){return n.deleteShift()}),t._UZ(16,"img",8),t.qZA()()),2&e&&(t.Q6J("ngStyle",t.VKq(15,A,0===n.index?"1px solid var(--borders)":"")),t.xp6(1),t.Q6J("ngClass",t.WLB(17,D,n.deleteState,n.shift.overnight)),t.xp6(2),t.Q6J("ngIf",n.shift.finished),t.xp6(1),t.Q6J("ngIf",!n.shift.finished),t.xp6(2),t.Oqu(n.shift.project),t.xp6(2),t.hij("",t.xi3(9,9,n.shift.startShift,"HH:mm")," "),t.xp6(2),t.Q6J("ngIf",n.shift.finished),t.xp6(1),t.hij(" ",t.xi3(12,12,n.shift.endShift,"HH:mm"),""),t.xp6(3),t.Oqu(n.calculateDifference(n.shift)))},directives:[f.PC,f.mk,f.O5],pipes:[f.uU],styles:[".shift-parent[_ngcontent-%COMP%]{border-bottom:1px solid var(--borders);position:relative;overflow:hidden}.shift-parent[_ngcontent-%COMP%]   .shift[_ngcontent-%COMP%]{transition:.3s;height:74px;padding:20px;width:100%;display:flex;justify-content:space-between;align-items:center;transform:translate(0);background-color:#fff;position:relative;z-index:1}.shift-parent[_ngcontent-%COMP%]   .shift[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px}.shift-parent[_ngcontent-%COMP%]   .under-layer[_ngcontent-%COMP%]{position:absolute;background-color:var(--delete-background);width:100%;height:100%;top:0;z-index:0;display:flex;align-items:center;width:65px;justify-content:center}.shift-parent[_ngcontent-%COMP%]   .overnight[_ngcontent-%COMP%]{color:var(--overnight);font-style:italic;font-weight:600}.enable-delete[_ngcontent-%COMP%]{transform:translate(65px)!important}"]}),i})();function N(i,o){1&i&&(t.TgZ(0,"div"),t._uU(1,"Hoje"),t.qZA())}function q(i,o){if(1&i){const e=t.EpF();t.TgZ(0,"div",10)(1,"app-shift-item",11),t.NdJ("deleteOutput",function(s){return t.CHM(e),t.oxw(2).deleteShift(s)})("updateOutput",function(s){return t.CHM(e),t.oxw(2).updateShift(s)}),t.qZA()()}if(2&i){const e=o.$implicit,n=o.index;t.xp6(1),t.Q6J("index",n)("shift",e)}}function Y(i,o){if(1&i&&(t.TgZ(0,"div",8),t.YNc(1,q,2,2,"div",9),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.shifts)}}function J(i,o){1&i&&(t.TgZ(0,"div",12),t._UZ(1,"img",13),t.TgZ(2,"div",14),t._uU(3,"Nenhum ponto registrado"),t.qZA()())}let F=(()=>{class i{constructor(e,n,s){this.shiftsService=e,this.loadingService=n,this.ngbModal=s,this.today=new Date,this.shiftsService.listShifts()}get shifts(){return this.shiftsService.shifts}get shiftDate(){return this.shiftsService.date}ngOnInit(){}calculateDifference(e){let n=new Date(e.startShift),s=new Date(e.endShift);if(e.finished){var a=s.getTime()-n.getTime();return`${Math.floor(a%864e5/36e5)}:${Math.round(a%864e5%36e5/6e4)}hr`}return"Aberto"}isToday(){let e=new Date(this.today).setHours(0),n=new Date(this.shiftDate).setHours(0);return new Date(e).getDate()===new Date(n).getDate()}previousShiftDate(){this.shiftsService.previousShiftDate()}nextShiftDate(){this.shiftsService.nextShiftDate()}updateShift(e){const n=this.ngbModal.open(b,{size:"md",centered:!0});n.componentInstance.shiftForm=new r.cw({endShift:new r.NI(h(this.shiftDate).format("YYYY-MM-DDTHH:mm:ss")),startShift:new r.NI(h(e.startShift).format("YYYY-MM-DDTHH:mm:ss")),activity:new r.NI(e.activity),shiftId:new r.NI(e._id.$oid),overnight:new r.NI(e.overnight)}),n.componentInstance.activity=e.activity,n.componentInstance.startShiftHour=Number(h(e.startShift).format("HH")),n.componentInstance.startShiftMinute=Number(h(e.startShift).format("mm")),!0===e.finished?(n.componentInstance.endShiftHour=Number(h(e.endShift).format("HH")),n.componentInstance.endShiftMinute=Number(h(e.endShift).format("mm"))):(n.componentInstance.endShiftHour=Number(h(this.shiftDate).format("HH")),n.componentInstance.endShiftMinute=Number(h(this.shiftDate).format("mm")))}deleteShift(e){this.ngbModal.open(Z,{size:"md",centered:!0}).componentInstance.shift=e}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d.U),t.Y36(O.b),t.Y36(c.FF))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-home"]],decls:19,vars:7,consts:[[2,"height","80px"],[1,"date-time","d-flex","align-items-center","justify-content-between"],["src","../../../assets/icons/left-arrow-icon.svg","alt","",3,"click"],[1,"d-flex","flex-column","align-items-center"],[4,"ngIf"],["src","../../../assets/icons/right-arrow-icon.svg","alt","",3,"click"],["class","body",4,"ngIf","ngIfElse"],["noShifts",""],[1,"body"],["class","shifts",4,"ngFor","ngForOf"],[1,"shifts"],[3,"index","shift","deleteOutput","updateOutput"],[1,"no-shifts","d-flex","flex-column","justify-content-center","align-items-center"],["src","../../../assets/icons/alert-icon.svg","alt",""],[1,"text-center"]],template:function(e,n){if(1&e&&(t.TgZ(0,"main"),t._UZ(1,"div",0),t.TgZ(2,"div",1)(3,"img",2),t.NdJ("click",function(){return n.previousShiftDate()}),t.qZA(),t.TgZ(4,"div",3),t.YNc(5,N,2,0,"div",4),t.TgZ(6,"div"),t._uU(7),t.ALo(8,"date"),t.qZA()(),t.TgZ(9,"img",5),t.NdJ("click",function(){return n.nextShiftDate()}),t.qZA()(),t.YNc(10,Y,2,1,"div",6),t.YNc(11,J,4,0,"ng-template",null,7,t.W1O),t._UZ(13,"br")(14,"br")(15,"br")(16,"br")(17,"br")(18,"br"),t.qZA()),2&e){const s=t.MAs(12);t.xp6(5),t.Q6J("ngIf",n.isToday()),t.xp6(2),t.Oqu(t.xi3(8,4,n.shiftDate,"EEE dd/MM/yyyy")),t.xp6(3),t.Q6J("ngIf",n.shifts.length>0)("ngIfElse",s)}},directives:[f.O5,f.sg,I],pipes:[f.uU],styles:["main[_ngcontent-%COMP%]{padding:28px 0;position:relative;height:100vh}.date-time[_ngcontent-%COMP%]{padding:0 38px}.no-shifts[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%)}.body[_ngcontent-%COMP%]{margin-top:23px}"]}),i})();var k=l(9560);let Q=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[f.ez]]}),i})();var j=l(9627);(0,f.qS)(j.Z);let P=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({providers:[{provide:t.soG,useValue:"pt-PT"}],imports:[[f.ez,Q,k.Bz.forChild([{path:"",component:F}])]]}),i})()}}]);